<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ValoDrop | KullanÄ±cÄ± Sistemi</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { background-color: #0f1923; color: white; font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; }
        nav { background: #1f2326; padding: 15px; border-bottom: 2px solid #ff4655; display: flex; justify-content: space-around; align-items: center; }
        .btn-valorant { background: #ff4655; color: white; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-valorant:hover { background: #cf3a46; transform: scale(1.05); }
        
        #auth-container { margin: 80px auto; max-width: 350px; background: #1b1e21; padding: 30px; border: 1px solid #333; border-radius: 8px; }
        input { width: 90%; padding: 12px; margin: 10px 0; background: #0f1923; border: 1px solid #444; color: white; border-radius: 4px; }
        
        #game-container { display: none; margin-top: 50px; }
        .case-box { border: 2px solid #333; width: 300px; margin: 0 auto; padding: 20px; background: #111; border-radius: 10px; }
        #result { margin-top: 20px; font-size: 22px; color: #ff4655; font-weight: bold; min-height: 30px; }
        
        .inventory { margin-top: 40px; background: #1b1e21; padding: 20px; border-top: 1px solid #333; }
        .item-card { background: #0f1923; padding: 10px; margin: 5px; border-left: 4px solid #ff4655; display: inline-block; width: 200px; text-align: left; }
    </style>
</head>
<body>

<nav>
    <div style="font-size: 24px; font-weight: bold; color: #ff4655;">VALODROP</div>
    <div id="user-display" style="font-weight: bold; color: #ece8e1;"></div>
</nav>

<div id="auth-container">
    <h2 style="color: #ff4655; margin-bottom: 20px;">HOÅž GELDÄ°N</h2>
    <input type="text" id="username" placeholder="KullanÄ±cÄ± AdÄ±">
    <input type="password" id="password" placeholder="Åžifre">
    <button class="btn-valorant" style="width: 100%; margin-top: 10px;" onclick="kayitOl()">HESAP OLUÅžTUR</button>
    <p style="font-size: 12px; color: #888;">Zaten hesabÄ±n varsa aÅŸaÄŸÄ±dan giriÅŸ yap:</p>
    <button class="btn-valorant" style="width: 100%; background: #333;" onclick="girisYap()">GÄ°RÄ°Åž YAP</button>
</div>

<div id="game-container">
    <h1 id="welcome-msg"></h1>
    <div class="case-box">
        <img src="https://media.valorant-api.com/sprays/2884a866-4f9e-648b-30d8-1e9671d60461/fullicon.png" width="120" alt="Kasa">
        <h3 style="margin: 10px 0;">KOLEKSÄ°YON KASASI</h3>
        <button class="btn-valorant" style="width: 100%;" onclick="kasaAc()">KASAYI AÃ‡ (ÃœCRETSÄ°Z)</button>
    </div>
    <div id="result">ÅžansÄ±nÄ± dene!</div>

    <div class="inventory">
        <h3>ENVANTERÄ°N</h3>
        <div id="items-list">HenÃ¼z bir skin Ã§Ä±karmadÄ±n.</div>
    </div>
    
    <button class="btn-valorant" style="margin-top: 30px; background: #333;" onclick="location.reload()">Ã‡IKIÅž YAP</button>
</div>

<script>
    // SUPABASE BAÄžLANTISI
    const SUPABASE_URL = 'https://iigemvvlznvgneghevev.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_sus0jwzJ9oMsoTO-_Xq3Yg_OTXHZIpm'; // Not: Bu senin public key'in olmalÄ±.
    const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // KAYIT OLMA
    async function kayitOl() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;

        if(!user || !pass) return alert("LÃ¼tfen alanlarÄ± doldur!");

        const { data, error } = await _supabase
            .from('users')
            .insert([{ username: user, password: pass }]);

        if (error) {
            console.error(error);
            alert("KayÄ±t sÄ±rasÄ±nda bir hata oluÅŸtu: " + error.message);
        } else {
            alert("BaÅŸarÄ±yla kayÄ±t oldun! Åžimdi giriÅŸ yapabilirsin.");
        }
    }

    // GÄ°RÄ°Åž YAPMA
    async function girisYap() {
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;

        const { data, error } = await _supabase
            .from('users')
            .select('*')
            .eq('username', user)
            .eq('password', pass);

        if (data && data.length > 0) {
            document.getElementById('auth-container').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            document.getElementById('welcome-msg').innerText = "Selam, " + user + "!";
            document.getElementById('user-display').innerText = "ðŸ‘¤ " + user;
        } else {
            alert("KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±!");
        }
    }

    // KASA AÃ‡MA
    function kasaAc() {
        const resultDiv = document.getElementById("result");
        resultDiv.innerText = "Kasa aÃ§Ä±lÄ±yor...";
        
        setTimeout(() => {
            const skinler = [
                "Vandal | YaÄŸmacÄ±", 
                "Phantom | Oni", 
                "BÄ±Ã§ak | Karambit", 
                "Classic | Standart",
                "Sheriff | Ä°yon",
                "Operator | Ejder AteÅŸi"
            ];
            const secilen = skinler[Math.floor(Math.random() * skinler.length)];
            resultDiv.innerText = "TEBRÄ°KLER: " + secilen;
            
            // Envantere ekle (GÃ¶rsel olarak)
            const liste = document.getElementById("items-list");
            if(liste.innerText.includes("HenÃ¼z")) liste.innerText = "";
            liste.innerHTML += `<div class="item-card">âœ¨ ${secilen}</div>`;
        }, 800);
    }
</script>
</body>
</html>
